---
import { Image } from 'astro:assets';
import Layout from '../layouts/Layout.astro';
import { type Models } from '../utils/interfaces/models.interface';

const response = await fetch('https://challenge.egodesign.dev/api/models/');
const models = (await response.json()) as Models[];

const price = (price: number) => {
  return price.toLocaleString('es-AR', {
    style: 'currency',
    currency: 'ARS',
  });
};



---

<Layout title="Ego Challenge">
  <h1 class="text-4xl sm:text-5xl font-bold pb-12 sm:pb-20">
    Descubr√≠ todos los modelos
  </h1>
  <section>FILTER</section>

  <section class="grid sm:grid-cols-2 lg:grid-cols-4 sm:gap-y-8">
    {
      models.map((model) => (
        <article class="grid justify-items-center items-baseline group">
          <div class="flex flex-col gap-1 items-center justify-center relative top-4">
            <h2 class="font-semibold text-[28px] group-hover:text-app-accent duration-300 ">
              {' '}
              {model.name}{' '}
            </h2>
            <span class="text-sm font-normal">
              {' '}
              {model.year} | {price(model.price)}
            </span>
          </div>
          <Image
            src={model.thumbnail}
            alt="A bird."
            width={228}
            height={132}
            class="object-contain h-[132px]"
          />
          <button class="text-[13px] font-medium bg-app-primary text-white w-40 h-8 rounded-full duration-300 opacity-0 group-hover:opacity-100 translate-y-7 group-hover:-translate-y-2">
            <a href={`/model/${model.id}`}>Ver modelo</a>
          </button>
        </article>
      ))
    }
  </section>
</Layout>

<style></style>
